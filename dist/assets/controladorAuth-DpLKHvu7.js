import{s as i}from"./index-jVy3ArWT.js";async function t(){const{data:{session:e}}=await i.auth.getSession();return e}async function u(){var n;console.log("[AUTH SIM CTRL] Obteniendo mi perfil...");const e=await t();return e!=null&&e.user?(console.log("[AUTH SIM CTRL] Devolviendo perfil simulado para:",e.user.email),{id:e.user.id||"simulado-id-perfil-123",email:e.user.email,nombre_completo:((n=e.user.user_metadata)==null?void 0:n.nombre_completo)||"Nequi Usuario Sim",telefono:e.user.phone||"3009876543",saldo_principal:123456.78,...e.user.user_metadata}):(console.warn("[AUTH SIM CTRL] No se pudo obtener perfil (sin sesión o sin usuario en sesión)."),null)}async function c(e,n){console.log("[AUTH SIM CTRL] Intentando iniciarSesionConEmail:",e);const{data:o,error:s}=await i.auth.signInWithPassword({email:e,password:n});return s?(console.error("[AUTH SIM CTRL] Error en login simulado devuelto por clienteSupabase.js:",s.message),{exito:!1,mensaje:s.message,error:s}):o&&o.session?(console.log("[AUTH SIM CTRL] Login simulado exitoso, sesión de clienteSupabase.js:",o.session),window.dispatchEvent(new CustomEvent("simulated_auth_change",{detail:{evento:"SIGNED_IN",sesion:o.session}})),{exito:!0,sesion:o.session}):(console.error("[AUTH SIM CTRL] Login simulado no devolvió sesión esperada."),{exito:!1,mensaje:"Error interno en simulación de login."})}async function d(){console.log("[AUTH SIM CTRL] Intentando cerrarSesion");const{error:e}=await i.auth.signOut();return e&&console.error("[AUTH SIM CTRL] Error en signOut simulado:",e.message),window.dispatchEvent(new CustomEvent("simulated_auth_change",{detail:{evento:"SIGNED_OUT",sesion:null}})),console.log("[AUTH SIM CTRL] Sesión cerrada simuladamente."),{exito:!e}}async function m(e,n,o={}){console.log("[AUTH SIM CTRL] Intentando registrar (simulado):",e,o);const s={data:o};o.telefono&&(s.phone=o.telefono);const{data:a,error:r}=await i.auth.signUp({email:e,password:n,options:s});return r?(console.error("[AUTH SIM CTRL] Error en registro simulado:",r.message),{exito:!1,mensaje:r.message,error:r}):(console.log("[AUTH SIM CTRL] Registro simulado exitoso, usuario:",a.user),alert("Simulación: ¡Registro exitoso! Por favor, inicia sesión para continuar. (El flujo real será implementado por el encargado de Auth)."),{exito:!0,usuario:a.user})}console.log("[ControladorAuth SIMULADO] Archivo cargado y todas las funciones deberían estar exportadas.");export{d as cerrarSesion,c as iniciarSesionConEmail,u as obtenerMiPerfil,m as registrarNuevoUsuario,t as verificarSesionActual};
